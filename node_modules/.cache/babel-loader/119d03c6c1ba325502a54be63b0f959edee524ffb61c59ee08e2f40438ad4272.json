{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{usePlayer}from\"../../context/PlayerContext\";import api from\"../../utils/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PlaylistView=()=>{const{playlistId}=useParams();// Get playlist from the URL\nconst{playSong}=usePlayer();const[playlist,setPlaylist]=useState(null);const[error,setError]=useState(\"\");const[songIdToAdd,setSongIdToAdd]=useState(\"\");const[successMessage,setSuccessMessage]=useState(\"\");// Fetch the playlist details on load\nuseEffect(()=>{const fetchPlaylist=async()=>{try{const response=await api.get(\"/playlists/\".concat(playlistId));setPlaylist(response.data);setError(\"\");}catch(error){setError(\"An error occurred while fetching the playlist\");}};fetchPlaylist();},[playlistId]);// Handle adding a song to the playlist\nconst handleAddSong=async()=>{try{await api.post(\"/playlists/\".concat(playlistId,\"/addSong\"),{songId:songIdToAdd});setSongIdToAdd(\"\");setSuccessMessage(\"Song added to the playlist successfully!\");setError(\"\");// Refresh the playlist after adding the song\nconst response=await api.get(\"/playlists/\".concat(playlistId));setPlaylist(response.data);}catch(error){setError(\"An error occurred while adding the song to the playlist\");setSuccessMessage(\"\");}};// Handle removing a song from the playlist\nconst handleRemoveSong=async songIdToRemove=>{try{await api.delete(\"/playlists/\".concat(playlistId,\"/removeSong\"),{songId:songIdToRemove});setSuccessMessage(\"Song removed from the playlist successfully!\");setError(\"\");// Refresh the playlist after removing the song\nconst response=await api.get(\"/playlists/\".concat(playlistId));setPlaylist(response.data);}catch(error){setError(\"An error occurred while removing the song from the playlist\");setSuccessMessage(\"\");}};const handleShuffle=async()=>{try{const response=await api.get(\"/playlists/\".concat(playlistId,\"/shuffle\"));setPlaylist(response.data);setSuccessMessage(\"Playlist shuffled successfully!\");setError(\"\");}catch(error){setError(\"An error occurred while shuffling the playlist\");setSuccessMessage(\"\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-music-background text-white p-6\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 p-3 rounded mb-4\",children:error}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 p-3 rounded mb-4\",children:successMessage}),playlist&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold\",children:playlist.name}),/*#__PURE__*/_jsx(\"button\",{onClick:handleShuffle,className:\"bg-music-primary text-black py-2 px-4 rounded hover:bg-green-600\",children:\"Shuffle Playlist\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl mb-4\",children:\"Songs in this Playlist:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:playlist.songs.map(song=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold\",children:song.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:song.artist}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>playSong(song),className:\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\",children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveSong(song.id),className:\"mt-2 bg-red-600 text-white py-1 px-3 rounded hover:bg-red-700\",children:\"Remove\"})]},song.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl mb-4\",children:\"Add a Song:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Song ID\",value:songIdToAdd,onChange:e=>setSongIdToAdd(e.target.value),className:\"w-full p-3 bg-gray-800 rounded text-white\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddSong,className:\"bg-music-primary py-2 px-4 rounded text-black hover:bg-green-600\",children:\"Add Song\"})]})]})]})]});};export default PlaylistView;","map":{"version":3,"names":["React","useState","useEffect","useParams","usePlayer","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PlaylistView","playlistId","playSong","playlist","setPlaylist","error","setError","songIdToAdd","setSongIdToAdd","successMessage","setSuccessMessage","fetchPlaylist","response","get","concat","data","handleAddSong","post","songId","handleRemoveSong","songIdToRemove","delete","handleShuffle","className","children","name","onClick","songs","map","song","title","artist","id","type","placeholder","value","onChange","e","target"],"sources":["D:/Vinay Hajare/React Projects/music-streaming-frontend/src/components/Playlists/PlaylistView.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { usePlayer } from \"../../context/PlayerContext\";\r\nimport api from \"../../utils/api\";\r\n\r\nconst PlaylistView = () => {\r\n  const { playlistId } = useParams(); // Get playlist from the URL\r\n  const { playSong } = usePlayer();\r\n  const [playlist, setPlaylist] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [songIdToAdd, setSongIdToAdd] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n\r\n  // Fetch the playlist details on load\r\n  useEffect(() => {\r\n    const fetchPlaylist = async () => {\r\n      try {\r\n        const response = await api.get(`/playlists/${playlistId}`);\r\n        setPlaylist(response.data);\r\n        setError(\"\");\r\n      } catch (error) {\r\n        setError(\"An error occurred while fetching the playlist\");\r\n      }\r\n    };\r\n    fetchPlaylist();\r\n  }, [playlistId]);\r\n\r\n  // Handle adding a song to the playlist\r\n  const handleAddSong = async () => {\r\n    try {\r\n      await api.post(`/playlists/${playlistId}/addSong`, {\r\n        songId: songIdToAdd,\r\n      });\r\n      setSongIdToAdd(\"\");\r\n      setSuccessMessage(\"Song added to the playlist successfully!\");\r\n      setError(\"\");\r\n      // Refresh the playlist after adding the song\r\n      const response = await api.get(`/playlists/${playlistId}`);\r\n      setPlaylist(response.data);\r\n    } catch (error) {\r\n      setError(\"An error occurred while adding the song to the playlist\");\r\n      setSuccessMessage(\"\");\r\n    }\r\n  };\r\n\r\n  // Handle removing a song from the playlist\r\n  const handleRemoveSong = async (songIdToRemove) => {\r\n    try {\r\n      await api.delete(`/playlists/${playlistId}/removeSong`, {\r\n        songId: songIdToRemove,\r\n      });\r\n      setSuccessMessage(\"Song removed from the playlist successfully!\");\r\n      setError(\"\");\r\n      // Refresh the playlist after removing the song\r\n      const response = await api.get(`/playlists/${playlistId}`);\r\n      setPlaylist(response.data);\r\n    } catch (error) {\r\n      setError(\"An error occurred while removing the song from the playlist\");\r\n      setSuccessMessage(\"\");\r\n    }\r\n  };\r\n\r\n  const handleShuffle = async () => {\r\n    try {\r\n      const response = await api.get(`/playlists/${playlistId}/shuffle`);\r\n      setPlaylist(response.data);\r\n      setSuccessMessage(\"Playlist shuffled successfully!\");\r\n      setError(\"\");\r\n    } catch (error) {\r\n      setError(\"An error occurred while shuffling the playlist\");\r\n      setSuccessMessage(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-music-background text-white p-6\">\r\n      {error && <div className=\"bg-red-500 p-3 rounded mb-4\">{error}</div>}\r\n      {successMessage && (\r\n        <div className=\"bg-green-500 p-3 rounded mb-4\">{successMessage}</div>\r\n      )}\r\n\r\n      {playlist && (\r\n        <>\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h2 className=\"text-3xl font-bold\">{playlist.name}</h2>\r\n            <button\r\n              onClick={handleShuffle}\r\n              className=\"bg-music-primary text-black py-2 px-4 rounded hover:bg-green-600\"\r\n            >\r\n              Shuffle Playlist\r\n            </button>\r\n          </div>\r\n\r\n          <h3 className=\"text-xl mb-4\">Songs in this Playlist:</h3>\r\n          <div className=\"space-y-4\">\r\n            {playlist.songs.map((song) => (\r\n              <div\r\n                key={song.id}\r\n                className=\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\"\r\n              >\r\n                <h4 className=\"text-lg font-semibold\">{song.title}</h4>\r\n                <p className=\"text-sm text-music-secondary\">{song.artist}</p>\r\n                <button\r\n                  onClick={() => playSong(song)}\r\n                  className=\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\"\r\n                >\r\n                  Play\r\n                </button>\r\n                <button\r\n                  onClick={() => handleRemoveSong(song.id)}\r\n                  className=\"mt-2 bg-red-600 text-white py-1 px-3 rounded hover:bg-red-700\"\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Add Song Section */}\r\n          <div className=\"mt-8\">\r\n            <h3 className=\"text-xl mb-4\">Add a Song:</h3>\r\n            <div className=\"flex gap-4\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Enter Song ID\"\r\n                value={songIdToAdd}\r\n                onChange={(e) => setSongIdToAdd(e.target.value)}\r\n                className=\"w-full p-3 bg-gray-800 rounded text-white\"\r\n              />\r\n              <button\r\n                onClick={handleAddSong}\r\n                className=\"bg-music-primary py-2 px-4 rounded text-black hover:bg-green-600\"\r\n              >\r\n                Add Song\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlaylistView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}