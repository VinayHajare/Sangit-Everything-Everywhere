{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from\"../../utils/api\";import{usePlayer}from\"../../context/PlayerContext\";import{useAuth}from\"../../hooks/useAuth\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RecommendedSongs=()=>{const[genre,setGenre]=useState(\"Pop\");// Default genre\nconst[recommendations,setRecommendations]=useState([]);const[userRecommendations,setUserRecommendations]=useState([]);const[historyRecommendations,setHistoryRecommendations]=useState([]);const[error,setError]=useState(\"\");const{playSong}=usePlayer();// get playsong from PlayerContext\nconst{user}=useAuth();// Fetch recommendations based on genre\nuseEffect(()=>{const fetchGenreRecommendations=async()=>{try{const response=await api.get(\"/discover/recommend/genre?genre=\".concat(genre));setRecommendations(response.data);setError(\"\");}catch(err){setError(\"Failed to fetch recommendations.\");}};fetchGenreRecommendations();},[genre]);// Fetch user-specific recommendations\nuseEffect(()=>{const fetchUserRecommendations=async()=>{try{const response=await api.get(\"/discover/recommend/user/\".concat(user.username));setUserRecommendations(response.data);setError(\"\");}catch(err){setError(\"Failed to fetch user recommendations.\");}};fetchUserRecommendations();},[]);// Fetch recommendations based on listening history\nuseEffect(()=>{const fetchHistoryRecommendations=async()=>{try{const response=await api.get(\"discover/recommendations\");setHistoryRecommendations(response.data);setError(\"\");}catch(err){setError(\"Failed to fetch history recommendations.\");}};fetchHistoryRecommendations();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-music-background text-white p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-music-primary mb-4\",children:\"Discover Music\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 p-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Recommended Songs by Genre\"}),/*#__PURE__*/_jsxs(\"select\",{value:genre,onChange:e=>setGenre(e.target.value),className:\"p-3 bg-gray-800 rounded text-white mb-4\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Pop\",children:\"Pop\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rock\",children:\"Rock\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Jazz\",children:\"Jazz\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Classical\",children:\"Classical\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recommendations.map(song=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:song.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:song.artist}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>playSong({id:song.id,title:song.title}),className:\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\",children:\"Play\"})]},song.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Recommended Songs for You\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:userRecommendations.map(song=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:song.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:song.artist}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>playSong({id:song.id,title:song.title}),className:\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\",children:\"Play\"})]},song.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Recommended Songs based on Playback History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:historyRecommendations.map(song=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:song.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:song.artist}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>playSong({id:song.id,title:song.title}),className:\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\",children:\"Play\"})]},song.id))})]})]});};export default RecommendedSongs;","map":{"version":3,"names":["React","useEffect","useState","api","usePlayer","useAuth","jsx","_jsx","jsxs","_jsxs","RecommendedSongs","genre","setGenre","recommendations","setRecommendations","userRecommendations","setUserRecommendations","historyRecommendations","setHistoryRecommendations","error","setError","playSong","user","fetchGenreRecommendations","response","get","concat","data","err","fetchUserRecommendations","username","fetchHistoryRecommendations","className","children","value","onChange","e","target","map","song","title","artist","onClick","id"],"sources":["D:/Vinay Hajare/React Projects/music-streaming-frontend/src/components/Discover/RecommendedSongs.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport api from \"../../utils/api\";\r\nimport { usePlayer } from \"../../context/PlayerContext\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\n\r\nconst RecommendedSongs = () => {\r\n  const [genre, setGenre] = useState(\"Pop\"); // Default genre\r\n  const [recommendations, setRecommendations] = useState([]);\r\n  const [userRecommendations, setUserRecommendations] = useState([]);\r\n  const [historyRecommendations, setHistoryRecommendations] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const { playSong } = usePlayer(); // get playsong from PlayerContext\r\n  const { user } = useAuth();\r\n\r\n  // Fetch recommendations based on genre\r\n  useEffect(() => {\r\n    const fetchGenreRecommendations = async () => {\r\n      try {\r\n        const response = await api.get(\r\n          `/discover/recommend/genre?genre=${genre}`\r\n        );\r\n        setRecommendations(response.data);\r\n        setError(\"\");\r\n      } catch (err) {\r\n        setError(\"Failed to fetch recommendations.\");\r\n      }\r\n    };\r\n\r\n    fetchGenreRecommendations();\r\n  }, [genre]);\r\n\r\n  // Fetch user-specific recommendations\r\n  useEffect(() => {\r\n    const fetchUserRecommendations = async () => {\r\n      try {\r\n        const response = await api.get(\r\n          `/discover/recommend/user/${user.username}`\r\n        );\r\n        setUserRecommendations(response.data);\r\n        setError(\"\");\r\n      } catch (err) {\r\n        setError(\"Failed to fetch user recommendations.\");\r\n      }\r\n    };\r\n\r\n    fetchUserRecommendations();\r\n  }, []);\r\n\r\n  // Fetch recommendations based on listening history\r\n  useEffect(() => {\r\n    const fetchHistoryRecommendations = async () => {\r\n      try {\r\n        const response = await api.get(\"discover/recommendations\");\r\n        setHistoryRecommendations(response.data);\r\n        setError(\"\");\r\n      } catch (err) {\r\n        setError(\"Failed to fetch history recommendations.\");\r\n      }\r\n    };\r\n\r\n    fetchHistoryRecommendations();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-music-background text-white p-6\">\r\n      <h2 className=\"text-3xl font-bold text-music-primary mb-4\">\r\n        Discover Music\r\n      </h2>\r\n      {error && <div className=\"bg-red-500 p-3 rounded mb-4\">{error}</div>}\r\n\r\n      {/* Genre Recommendations */}\r\n      <div className=\"mb-8\">\r\n        <h3 className=\"text-2xl font-bold mb-4\">Recommended Songs by Genre</h3>\r\n        <select\r\n          value={genre}\r\n          onChange={(e) => setGenre(e.target.value)}\r\n          className=\"p-3 bg-gray-800 rounded text-white mb-4\"\r\n        >\r\n          <option value=\"Pop\">Pop</option>\r\n          <option value=\"Rock\">Rock</option>\r\n          <option value=\"Jazz\">Jazz</option>\r\n          <option value=\"Classical\">Classical</option>\r\n        </select>\r\n        <div className=\"space-y-4\">\r\n          {recommendations.map((song) => (\r\n            <div\r\n              key={song.id}\r\n              className=\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\"\r\n            >\r\n              <h3 className=\"text-xl font-semibold\">{song.title}</h3>\r\n              <p className=\"text-sm text-music-secondary\">{song.artist}</p>\r\n              <button\r\n                onClick={() => playSong({ id: song.id, title: song.title })}\r\n                className=\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\"\r\n              >\r\n                Play\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* User Recommendations */}\r\n      <div>\r\n        <h3 className=\"text-2xl font-bold mb-4\">Recommended Songs for You</h3>\r\n        <div className=\"space-y-4\">\r\n          {userRecommendations.map((song) => (\r\n            <div\r\n              key={song.id}\r\n              className=\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\"\r\n            >\r\n              <h3 className=\"text-xl font-semibold\">{song.title}</h3>\r\n              <p className=\"text-sm text-music-secondary\">{song.artist}</p>\r\n              <button\r\n                onClick={() => playSong({ id: song.id, title: song.title })}\r\n                className=\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\"\r\n              >\r\n                Play\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recommendation based on listening History */}\r\n      <div>\r\n        <h3 className=\"text-2xl font-bold mb-4\">\r\n          Recommended Songs based on Playback History\r\n        </h3>\r\n        <div className=\"space-y-4\">\r\n          {historyRecommendations.map((song) => (\r\n            <div\r\n              key={song.id}\r\n              className=\"bg-gray-800 rounded p-4 shadow hover:shadow-lg transition\"\r\n            >\r\n              <h3 className=\"text-xl font-semibold\">{song.title}</h3>\r\n              <p className=\"text-sm text-music-secondary\">{song.artist}</p>\r\n              <button\r\n                onClick={() => playSong({ id: song.id, title: song.title })}\r\n                className=\"mt-2 bg-music-primary text-black py-1 px-4 rounded hover:bg-green-600\"\r\n              >\r\n                Play\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RecommendedSongs;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}