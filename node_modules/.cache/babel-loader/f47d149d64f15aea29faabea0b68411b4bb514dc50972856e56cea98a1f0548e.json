{"ast":null,"code":"import _objectSpread from\"D:/Vinay Hajare/React Projects/music-streaming-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useAuth}from\"../../hooks/useAuth\";import api from\"../../utils/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserProfile=()=>{const{user}=useAuth();// Get the logged-in user\nconst[profile,setProfile]=useState(null);// User profile details\nconst[isEditing,setIsEditing]=useState(false);const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");const[formData,setFormData]=useState({bio:\"\",profilePicture:\"\"});// Fetch user profile\nuseEffect(()=>{const fetchProfile=async()=>{try{const response=await api.get(\"/profile/\".concat(user.username));setProfile(response.data);setFormData({bio:response.data.bio||\"\",profilePicture:response.data.profilePicture||\"\"});setError(\"\");}catch(err){setError(\"Failed to fetch profile details. Please try again.\");}};fetchProfile();},[user.username]);const handleEditToggle=()=>{setIsEditing(prev=>!prev);setSuccess(\"\");setError(\"\");};const handleInputChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSave=async()=>{try{await api.put(\"/profile/\".concat(user.username),formData);setProfile(_objectSpread(_objectSpread({},profile),formData));setIsEditing(false);setSuccess(\"Profile updated successfully!\");setError(\"\");}catch(err){setError(\"Failed to update profile. Please try again.\");setSuccess(\"\");}};if(!profile){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-music-background text-white p-6\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-music-background text-white p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-music-primary mb-4\",children:\"Your Profile\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 p-3 rounded mb-4\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 p-3 rounded mb-4\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:profile.username})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:profile.email})]}),isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:\"Bio:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"bio\",value:formData.bio,onChange:handleInputChange,className:\"w-full p-3 bg-gray-800 rounded text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:\"Profile Picture URL:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"profilePicture\",value:formData.profilePicture,onChange:handleInputChange,className:\"w-full p-3 bg-gray-800 rounded text-white\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"mt-4 bg-music-primary py-2 px-4 rounded text-black hover:bg-green-600\",children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEditToggle,className:\"mt-4 ml-4 bg-gray-600 py-2 px-4 rounded text-white hover:bg-gray-700\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:\"Bio:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-music-secondary\",children:profile.bio})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:\"Profile Picture:\"}),profile.profilePicture&&/*#__PURE__*/_jsx(\"img\",{src:profile.profilePicture,alt:\"Profile\",className:\"w-32 h-32 rounded-full mt-2\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEditToggle,className:\"mt-4 bg-music-primary py-2 px-4 rounded text-black hover:bg-green-600\",children:\"Edit Profile\"})]})]})]});};export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useAuth","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserProfile","user","profile","setProfile","isEditing","setIsEditing","error","setError","success","setSuccess","formData","setFormData","bio","profilePicture","fetchProfile","response","get","concat","username","data","err","handleEditToggle","prev","handleInputChange","e","name","value","target","_objectSpread","handleSave","put","className","children","email","onChange","type","onClick","src","alt"],"sources":["D:/Vinay Hajare/React Projects/music-streaming-frontend/src/components/Profile/UserProfie.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\nimport api from \"../../utils/api\";\r\n\r\nconst UserProfile = () => {\r\n  const { user } = useAuth(); // Get the logged-in user\r\n  const [profile, setProfile] = useState(null); // User profile details\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  const [formData, setFormData] = useState({\r\n    bio: \"\",\r\n    profilePicture: \"\",\r\n  });\r\n\r\n  // Fetch user profile\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const response = await api.get(`/profile/${user.username}`);\r\n        setProfile(response.data);\r\n        setFormData({\r\n          bio: response.data.bio || \"\",\r\n          profilePicture: response.data.profilePicture || \"\",\r\n        });\r\n        setError(\"\");\r\n      } catch (err) {\r\n        setError(\"Failed to fetch profile details. Please try again.\");\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, [user.username]);\r\n\r\n  const handleEditToggle = () => {\r\n    setIsEditing((prev) => !prev);\r\n    setSuccess(\"\");\r\n    setError(\"\");\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await api.put(`/profile/${user.username}`, formData);\r\n      setProfile({ ...profile, ...formData });\r\n      setIsEditing(false);\r\n      setSuccess(\"Profile updated successfully!\");\r\n      setError(\"\");\r\n    } catch (err) {\r\n      setError(\"Failed to update profile. Please try again.\");\r\n      setSuccess(\"\");\r\n    }\r\n  };\r\n\r\n  if (!profile) {\r\n    return <div className=\"bg-music-background text-white p-6\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-music-background text-white p-6\">\r\n      <h2 className=\"text-3xl font-bold text-music-primary mb-4\">Your Profile</h2>\r\n      {error && <div className=\"bg-red-500 p-3 rounded mb-4\">{error}</div>}\r\n      {success && <div className=\"bg-green-500 p-3 rounded mb-4\">{success}</div>}\r\n\r\n      <div className=\"space-y-4\">\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold\">Username:</h3>\r\n          <p className=\"text-sm text-music-secondary\">{profile.username}</p>\r\n        </div>\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold\">Email:</h3>\r\n          <p className=\"text-sm text-music-secondary\">{profile.email}</p>\r\n        </div>\r\n        {isEditing ? (\r\n          <>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold\">Bio:</h3>\r\n              <textarea\r\n                name=\"bio\"\r\n                value={formData.bio}\r\n                onChange={handleInputChange}\r\n                className=\"w-full p-3 bg-gray-800 rounded text-white\"\r\n              ></textarea>\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold\">Profile Picture URL:</h3>\r\n              <input\r\n                type=\"text\"\r\n                name=\"profilePicture\"\r\n                value={formData.profilePicture}\r\n                onChange={handleInputChange}\r\n                className=\"w-full p-3 bg-gray-800 rounded text-white\"\r\n              />\r\n            </div>\r\n            <button\r\n              onClick={handleSave}\r\n              className=\"mt-4 bg-music-primary py-2 px-4 rounded text-black hover:bg-green-600\"\r\n            >\r\n              Save Changes\r\n            </button>\r\n            <button\r\n              onClick={handleEditToggle}\r\n              className=\"mt-4 ml-4 bg-gray-600 py-2 px-4 rounded text-white hover:bg-gray-700\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold\">Bio:</h3>\r\n              <p className=\"text-sm text-music-secondary\">{profile.bio}</p>\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold\">Profile Picture:</h3>\r\n              {profile.profilePicture && (\r\n                <img\r\n                  src={profile.profilePicture}\r\n                  alt=\"Profile\"\r\n                  className=\"w-32 h-32 rounded-full mt-2\"\r\n                />\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={handleEditToggle}\r\n              className=\"mt-4 bg-music-primary py-2 px-4 rounded text-black hover:bg-green-600\"\r\n            >\r\n              Edit Profile\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}